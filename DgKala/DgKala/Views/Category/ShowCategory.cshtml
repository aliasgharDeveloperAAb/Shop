@using DgKala.Models.Entities.Category
@model DgKala.Models.Entities.Category.Category


@{
    ViewData["Title"] = Model.CategoryTitle;
}

<main class="single-product default">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <nav>
                    <ul class="breadcrumb">
                        <li>
                            <a href="#"><span>فروشگاه اینترنتی دیجی کالا</span></a>
                        </li>
                        <li>
                            <a href="#"><span>کالای دیجیتال</span></a>
                        </li>
                        <li>
                            <a href="#"><span>@Model.CategoryTitle</span></a>
                        </li>


                    </ul>
                </nav>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <article class="product">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 col-sm-12">
                            <div class="product-gallery default">
                                <div class="zoomWrapper" style="height: 411px; width: 411px;"><img class="zoom-img" id="img-product-zoom" src="/Category/image/@Model.CategoryImageName" data-zoom-image="/Category/image/@Model.CategoryImageName" width="411" style="position: absolute;"></div>

                                <div id="gallery_01f" style="width: 500px; float: left;">
                                    <ul class="gallery-items">
                                        <li>
                                            <a href="#" class="elevatezoom-gallery active" data-update="" data-image="//Category/image/@Model.CategoryImageName" data-zoom-image="//Category/image/@Model.CategoryImageName">
                                                <img src="/Category/image/@Model.CategoryImageName" width="100">
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#" class="elevatezoom-gallery" data-image="/Category/image/@Model.CategoryImageName" data-zoom-image="/Category/image/@Model.CategoryImageName"><img src="/Category/image/@Model.CategoryImageName" width="100"></a>
                                        </li>
                                        <li>
                                            <a href="#" class="elevatezoom-gallery" data-image="/Category/image/@Model.CategoryImageName" data-zoom-image="/Category/image/@Model.CategoryImageName">
                                                <img src="/Category/image/@Model.CategoryImageName" width="100">
                                            </a>
                                        </li>
                                        <li>
                                            <a href="/ShowCategory/@Model.CategoryId" class="elevatezoom-gallery" data-image="/Category/image/@Model.CategoryImageName" data-zoom-image="/Category/image/@Model.CategoryImageName"><img src="/Category/image/@Model.CategoryImageName" height="68"></a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <ul class="gallery-options">
                                <li>
                                    <button class="add-favorites"><i class="fa fa-heart"></i></button>
                                    <span class="tooltip-option">افزودن به علاقمندی</span>
                                </li>
                                <li>
                                    <button data-toggle="modal" data-target="#myModal"><i class="fa fa-share-alt"></i></button>
                                    <span class="tooltip-option">اشتراک گذاری</span>
                                </li>
                            </ul>
                            <!-- Modal Core -->
                            <div class="modal-share modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                                            <h4 class="modal-title" id="myModalLabel">اشتراک گذاری</h4>
                                        </div>
                                        <div class="modal-body">
                                            <form class="form-share">
                                                <div class="form-share-title">اشتراک گذاری در شبکه های اجتماعی</div>
                                                <div class="row">
                                                    <div class="col-12">
                                                        <ul class="btn-group-share">
                                                           <li><a href="#" class="btn-share btn-share-twitter" target="_blank"><i class="fa fa-twitter"></i></a></li>
                                                            <li><a href="#" class="btn-share btn-share-facebook" target="_blank"><i class="fa fa-facebook"></i></a></li>
                                                            <li><a href="#" class="btn-share btn-share-google-plus" target="_blank"><i class="fa fa-google-plus"></i></a></li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="form-share-title">ارسال به ایمیل</div>
                                                <div class="row">
                                                    <div class="col-12">
                                                        <label class="ui-input ui-input-send-to-email">
                                                            <input class="ui-input-field" type="email" placeholder="آدرس ایمیل را وارد نمایید.">
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-12">
                                                        <button class="btn-primary">ارسال</button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                        <div class="modal-footer">
                                            <form class="form-share-url default">
                                                <div class="form-share-url-title">آدرس صفحه</div>
                                                <div class="row">
                                                    <div class="col-12">
                                                        <label class="ui-url">
                                                            <input class="ui-url-field" value="https://www.digikala.com">
                                                        </label>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Modal Core -->
                        </div>
                        <div class="col-lg-4 col-md-6 col-sm-12">
                            <div class="product-title default">
                                <h1>
                                    @Model.CategoryTitle
                                </h1>
                            </div>
                            @if (Model.Tags != null)
                            {
                                <div class="product-directory default">

                                    @foreach (string tag in Model.Tags.Split('_', StringSplitOptions.RemoveEmptyEntries))
                                    {
                                        <a href="/Category?filter=@tag">@tag</a>
                                    }

                                </div>
                            }

                            <div class="product-guarantee default">
                                <i class="fa fa-check-circle"></i>
                                <p class="product-guarantee-text">گارانتی اصالت و سلامت فیزیکی کالا</p>
                            </div>
                            <div class="product-delivery-seller default">
                                <p>
                                    <i class="now-ui-icons shopping_shop"></i>
                                    <span>فروشنده:‌</span>
                                    <a href="#" class="btn-link-border">@Model.User.UserName</a>
                                </p>
                            </div>
                            <div class="price-product defualt">
                                <div class="price-value">
                                    <span> @Model.CategoryPrice.ToString("#,0") </span>
                                    <span class="price-currency">تومان</span>
                                </div>
                                <div class="price-discount" data-title="تخفیف">
                                    <span>
                                        ۰
                                    </span>
                                    <span>%</span>
                                </div>
                            </div>
                            <div class="product-add default">
                                <div class="parent-btn">
                                    @if (Model.CategoryPrice != 0)
                                    {
                                        <a href="/Category/BuyCategory/@Model.CategoryId" class="dk-btn dk-btn-info">
                                            افزودن به سبد خرید
                                            <i class="now-ui-icons shopping_cart-simple"></i>
                                        </a>

                                    }

                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6 col-sm-12 center-breakpoint">
                            <div class="product-guaranteed default">
                                بیش از ۱۸۰ نفر از خریداران این محصول را پیشنهاد داده‌اند
                            </div>
                            <div class="product-params default">
                                <ul data-title="ویژگی‌های محصول">
                                    @Model.Attributes
                                </ul>
                            </div>
                        </div>
                    </div>
                </article>
            </div>
        </div>
        <div class="row">
            <div class="container">
                <div class="col-12 default no-padding">
                    <div class="product-tabs default">
                        <div class="box-tabs default">
                            <ul class="nav" role="tablist">
                                <li class="box-tabs-tab">
                                    <a class="active" data-toggle="tab" href="#desc" role="tab" aria-expanded="true">
                                        <i class="now-ui-icons objects_umbrella-13"></i> نقد و بررسی
                                    </a>
                                </li>
                                <li class="box-tabs-tab">
                                    <a data-toggle="tab" href="#params" role="tab" aria-expanded="false">
                                        <i class="now-ui-icons shopping_cart-simple"></i> مشخصات
                                    </a>
                                </li>

                                <li class="box-tabs-tab">
                                    <a asp-controller="Forum"asp-action="Index" asp-route-categoryId="@Model.CategoryId" class="btn btn-warning">
                                   پرسش سوال
                                      
                                    </a>
                                </li>
                            </ul>
                            <div class="card-body default">
                                <!-- Tab panes -->
                                <div class="tab-content">
                                    <div class="tab-pane active" id="desc" role="tabpanel" aria-expanded="true">
                                        <article>
                                            <h2 class="param-title">
                                                نقد و بررسی تخصصی
                                                <span>@Model.CategoryTitle</span>
                                            </h2>
                                            <div class="parent-expert default">
                                                <div class="content-expert">
                                                    @Html.Raw(Model.Description)
                                                </div>

                                                <div class="shadow-box"></div>
                                            </div>



                                        </article>
                                    </div>


                                    <div id="vot">
                                    </div>


                                    <div class="tab-pane params" id="params" role="tabpanel" aria-expanded="false">
                                        <article>
                                            <h2 class="param-title">
                                                مشخصات فنی
                                                <span>@Model.CategoryTitle</span>
                                            </h2>
                                            <section>
                                                <h3 class="params-title">مشخصات کلی</h3>
                                                <ul class="params-list">
                                                    @Model.Attributes
                                                </ul>
                                            </section>

                                        </article>
                                    </div>

                                    <div class="card-body default">
                                        @if (User.Identity.IsAuthenticated)
                                        {
                                            <div class="tab-pane form-comment" id="questions" role="tabpanel" aria-expanded="false">
                                                <article>
                                                    <h2 class="param-title">
                                                        افزودن نظر
                                                        <span>نظر خود را در مورد محصول مطرح نمایید</span>
                                                    </h2>
                                                    <form asp-controller="Category" asp-action="CreateComment"
                                                      data-ajax="true"
                                                      data-ajax-method="post"
                                                      data-ajax-mode="replace"
                                                      data-ajax-Update="#ListComment"
                                                      data-ajax-success="success">
                                                        <input type="hidden" name="comment.CategoryId" value="@Model.CategoryId" />

                                                        <textarea class="form-control" id="comment_Comment" name="comment.Comment" placeholder="نظر" rows="5"></textarea>
                                                        <button class="btn btn-default">ارسال نظر</button>
                                                    </form>
                                                </article>
                                            </div>
                                        }
                                        else
                                        {
                                            <div class="alert alert-danger">
                                                جهت ارسال نظر باید <a href="/Login">وارد</a> سایت شوید


                                            </div>
                                        }

                                        <div class="tab-content">

                                            <div class="tab-pane active show" id="comments" role="tabpanel" aria-expanded="false">

                                                <article>
                                                    <h2 class="param-title">
                                                        نظرات کاربران
                                                        @*        <span>۱۲۳ نظر</span>*@
                                                    </h2>
                                                    <div class="comments-area default" id="ListComment">
                                                    </div>
                                                </article>
                                            </div>

                                        </div>




                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

</main>
@section Script
    {
       <script src="/assets/js/jquery.unobtrusive-ajax.js"></script>
    <script>
        function success() {
            $("#comment_Comment").val("");
        }

        $(function () {
            $("#ListComment").load("/Category/ShowComment/" + @Model.CategoryId);
        });

        function pageComment(pageid) {
            $("#ListComment").load("/Category/ShowComment/"  @Model.CategoryId+"?pageId=" + pageid);
        }

        $(function () {
            $("#vot").load("/Category/CategoryVote/@Model.CategoryId");
             )};


    </script>
}
